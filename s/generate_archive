#!/bin/bash

# Define the base directory where the folders will be created.
# Ensure this path is correct for your system.
BASE_DIR="$(pwd)"

echo "Starting dummy data generation in: $BASE_DIR"

# Check if the base directory exists, if not, create it.
if [ ! -d "$BASE_DIR" ]; then
    echo "Base directory '$BASE_DIR' does not exist. Creating it..."
    mkdir -p "$BASE_DIR"
    if [ $? -ne 0 ]; then
        echo "Error: Could not create base directory '$BASE_DIR'. Exiting."
        exit 1
    fi
fi

# Loop through the years 2022 to 2025
for year in {2022..2025}; do
    YEAR_DIR="$BASE_DIR/$year"
    echo "Creating year directory: $YEAR_DIR"
    mkdir -p "$YEAR_DIR"

    # Loop through the months 1 to 12
    for month in {1..12}; do
        MONTH_DIR="$YEAR_DIR/$month"
        echo "  Creating month directory: $MONTH_DIR"
        mkdir -p "$MONTH_DIR"

        # Loop through the days 1 to 30
        for day in {1..30}; do
            DAY_DIR="$MONTH_DIR/$day"
            echo "    Creating day directory: $DAY_DIR"
            mkdir -p "$DAY_DIR"

            # Generate a random file size between 0 and 1 MB (1048576 bytes)
            # Using /dev/urandom for random bytes and head -c to limit size.
            # Max size is 1MB = 1024 * 1024 = 1048576 bytes
            # For simplicity, let's pick a random size up to 1MB.
            # The 'shuf -i 0-1048576 -n 1' command generates a random number between 0 and 1048576.
            FILE_SIZE_BYTES=$(shuf -i 0-1048576 -n 1)
            DUMMY_FILE="$DAY_DIR/dummy_file.bin" # Using .bin extension as it's binary data

            echo "      Generating dummy file: $DUMMY_FILE with size ${FILE_SIZE_BYTES} bytes"
            # Create the dummy file with random content
            head -c "$FILE_SIZE_BYTES" /dev/urandom > "$DUMMY_FILE"

            if [ $? -ne 0 ]; then
                echo "      Warning: Could not create dummy file '$DUMMY_FILE'."
            fi
        done
    done
done

echo "Dummy data generation complete!"
echo "You can check the created structure in $BASE_DIR"
